
name: x*30\30+5-5
# mode: optimized
endpoint: amqp://rabbitmq
steps:
- block: gateway # The first step is special.
  fn: listen     # it is called directly at the start of IO.
  extraArgs:
  - port: 3000 # Start a web server on port 3000
- block: mul # Name of the service
  fn: mul # function that is registered that is called
  extraArgs:
  - 30
- block: div
  fn: div
  extraArgs:
  - 30
- block: plus
  fn: plus
  extraArgs:
  - 5
- block: min
  fn: min
  extraArgs:
  - 5
- block: gateway
  fn: reply
  extraArgs:
  - port: 3000 # Send back a reply using the webserver on this port

extraServices:
  rabbitmq:
    image: rabbitmq:3-management
