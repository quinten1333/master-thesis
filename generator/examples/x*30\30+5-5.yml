
name: x*30/30+5-5
# mode: optimized
endpoint: amqp://rabbitmq
steps:
- block: gateway
  fn: listen
  extraArgs:
  - port: 3000
- blocks: mul
  fn: mul
  extraArgs:
  - 30
- blocks: div
  fn: div
  extraArgs:
  - 30
- block: plus
  fn: plus
  extraArgs:
  - 5
- block: min
  fn: min
  extraArgs:
  - 5
- block: gateway
  fn: reply
  extraArgs:
  - port: 3000

extraServices:
  rabbitmq:
    image: rabbitmq:3-management
    hostname: 'rabbitmq'
    volumes:
      - ./rabbitmq.conf:/etc/rabbitmq/conf.d/11-custom.conf
    ports:
      - 15672:15672
